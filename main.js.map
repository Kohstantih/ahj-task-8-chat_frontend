{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ahj-task-8-chat_frontend/./src/js/ChatWidget.js","webpack://ahj-task-8-chat_frontend/./src/js/CommunicationServer.js","webpack://ahj-task-8-chat_frontend/./src/js/ControlChat.js","webpack://ahj-task-8-chat_frontend/./src/js/CreationElements.js","webpack://ahj-task-8-chat_frontend/./src/js/Curtain.js","webpack://ahj-task-8-chat_frontend/./src/js/GetDate.js","webpack://ahj-task-8-chat_frontend/./src/js/ShowErrorMessage.js","webpack://ahj-task-8-chat_frontend/./src/js/ToolTip.js","webpack://ahj-task-8-chat_frontend/./src/js/app.js","webpack://ahj-task-8-chat_frontend/./src/index.html","webpack://ahj-task-8-chat_frontend/./src/css/style.css?6b7b","webpack://ahj-task-8-chat_frontend/webpack/bootstrap","webpack://ahj-task-8-chat_frontend/webpack/runtime/define property getters","webpack://ahj-task-8-chat_frontend/webpack/runtime/global","webpack://ahj-task-8-chat_frontend/webpack/runtime/hasOwnProperty shorthand","webpack://ahj-task-8-chat_frontend/webpack/runtime/make namespace object","webpack://ahj-task-8-chat_frontend/webpack/runtime/publicPath","webpack://ahj-task-8-chat_frontend/./src/index.js"],"sourcesContent":["import CreationElements from './CreationElements';\n\nexport default class ChatWidget {\n  constructor(container) {\n    this.container = container;\n    this.formRegistration = document.forms.registration;\n    this.enterNickname = this.formRegistration.elements.nickname;\n    this.errorBtnOK = this.container.querySelector('.error-message_ok');\n    this.userList = this.container.querySelector('.users_list');\n\n    this.chatBox = this.container.querySelector('.chat_box');\n    this.messageList = this.chatBox.querySelector('.messages_list');\n    this.formSendMessage = document.forms.message;\n    this.enterMessage = this.formSendMessage.elements.enter;\n\n    this.mineId = null;\n  }\n\n  hidingFormRegistration() {\n    this.formRegistration.classList.add('hidden');\n  }\n\n  showChatBox() {\n    this.chatBox.classList.remove('hidden');\n  }\n\n  renderingUserList(array) {\n    array.forEach((el) => {\n      this.addUserToList(el);\n    });\n  }\n\n  createUserElement(obj) {\n    const user = CreationElements.createElement('li', ['user']);\n    user.dataset.id = obj.id;\n    const circle = CreationElements.createElement('div', ['circle']);\n    const nickname = CreationElements.createElement('span', ['nickname']);\n    if (obj.id === this.mineId) {\n      nickname.textContent = 'You';\n      nickname.classList.add('mine');\n    } else {\n      nickname.textContent = obj.nickname;\n    }\n\n    user.append(circle);\n    user.append(nickname);\n    return user;\n  }\n\n  addUserToList(obj) {\n    const user = this.createUserElement(obj);\n    this.userList.append(user);\n  }\n\n  delUserFromList(obj) {\n    [...this.userList.childNodes].find((child) => child.dataset.id === obj.id).remove();\n  }\n\n  renderingMessage(obj) {\n    const { chat } = obj;\n    chat.forEach((m) => this.addMessageToList(m));\n  }\n\n  addMessageToList(messageObj) {\n    const message = this.createMessageElement(messageObj);\n    this.messageList.append(message);\n  }\n\n  createMessageElement(messageInf) {\n    const message = CreationElements.createElement('li', ['message']);\n    message.dataset.id = messageInf.id;\n\n    const info = CreationElements.createElement('div', ['message_info']);\n    const author = CreationElements.createElement('span', ['message_author']);\n\n    if (messageInf.id === this.mineId) {\n      message.classList.add('mine_message');\n      info.classList.add('mine');\n      author.textContent = 'You';\n    } else {\n      author.textContent = messageInf.nickname;\n    }\n\n    const date = CreationElements.createElement('span', ['message_date']);\n    date.textContent = messageInf.date;\n\n    info.append(author);\n    info.append(date);\n\n    const text = CreationElements.createElement('span', ['message_text']);\n    text.textContent = messageInf.text;\n\n    message.append(info);\n    message.append(text);\n\n    return message;\n  }\n\n  getLastMessage() {\n    return this.messageList.childNodes[this.messageList.childNodes.length - 1];\n  }\n}\n","export default class CommunicationServer {\n  constructor(port, portWs) {\n    this.port = port;\n    this.portWs = portWs;\n\n    this.ws = null;\n  }\n\n  async sendNickname(nickname) {\n    const url = `${this.port}/nickname`;\n\n    const response = fetch(url, {\n      method: 'POST',\n      body: nickname,\n    });\n\n    return response;\n  }\n\n  streaming(id, callbackErr, callbackMessage) {\n    const eventSource = new EventSource(`${this.port}/sse/${id}`);\n\n    eventSource.addEventListener('error', callbackErr);\n\n    eventSource.addEventListener('message', callbackMessage);\n  }\n\n  getUserList() {\n    const url = `${this.port}/nickname`;\n\n    const response = fetch(url);\n\n    return response;\n  }\n\n  messaging(callbackOpen, callbackClose, callbackError, callbackMessage) {\n    this.ws = new WebSocket(`${this.portWs}/ws`);\n\n    this.ws.addEventListener('open', callbackOpen);\n\n    this.ws.addEventListener('close', callbackClose);\n\n    this.ws.addEventListener('error', callbackError);\n\n    this.ws.addEventListener('message', callbackMessage);\n  }\n\n  sendMessage(message) {\n    this.ws.send(JSON.stringify(message));\n  }\n}\n","import GetDate from './GetDate';\n\nexport default class ControlChat {\n  constructor(widget, toolTip, communicator, showErrorMessage) {\n    this.widget = widget;\n    this.toolTip = toolTip;\n    this.communicator = communicator;\n    this.showErrorMessage = showErrorMessage;\n\n    this.messagingStatus = false;\n\n    this.regNickname = this.regNickname.bind(this);\n    this.changeEnterNickname = this.changeEnterNickname.bind(this);\n    this.hideError = this.hideError.bind(this);\n    this.streamingErr = this.streamingErr.bind(this);\n    this.readServerMessage = this.readServerMessage.bind(this);\n    this.messagingOpened = this.messagingOpened.bind(this);\n    this.messagingClosed = this.messagingClosed.bind(this);\n    this.messagingError = this.messagingError.bind(this);\n    this.createMessage = this.createMessage.bind(this);\n    this.readMessage = this.readMessage.bind(this);\n  }\n\n  activation() {\n    this.widget.formRegistration.addEventListener('submit', this.regNickname);\n    this.widget.enterNickname.addEventListener('input', this.changeEnterNickname);\n  }\n\n  regNickname(e) {\n    e.preventDefault();\n\n    const nickname = this.widget.enterNickname.value;\n    if (nickname.length > 2) {\n      this.communicator.sendNickname(new FormData(this.widget.formRegistration))\n        .then((response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          throw new Error('Не удалось проверить имя');\n        }).then((data) => {\n          if (data) {\n            if (data.status === 'free') {\n              this.widget.mineId = data.user.id;\n              return this.showChat();\n            } if (data.status === 'busy') {\n              return this.toolTip.showToolTip(this.widget.enterNickname, 'Имя уже используется');\n            }\n          }\n          throw new Error('Не удалось обработать ответ сервера');\n        }).catch((err) => {\n          this.showErrorMessage.showMessage(err.message);\n        });\n    } else {\n      this.toolTip.showToolTip(this.widget.enterNickname, 'Слишком короткий псевдоним');\n    }\n  }\n\n  changeEnterNickname(e) {\n    if (this.toolTip.isToolTip()) this.toolTip.hideToolTip(e.target.name);\n  }\n\n  hideError(e) {\n    e.preventDefault();\n\n    this.showErrorMessage.hideMessage();\n  }\n\n  showChat() {\n    this.widget.hidingFormRegistration();\n    this.widget.showChatBox();\n\n    this.communicator\n      .streaming(this.widget.mineId, this.streamingErr, this.readServerMessage);\n\n    this.communicator\n      .messaging(this.messagingOpened, this.messagingClosed, this.messagingError, this.readMessage);\n\n    this.communicator.getUserList()\n      .then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n        throw new Error('Не удалось загрузить список участников');\n      }).then((data) => {\n        if (data) {\n          return this.widget.renderingUserList(data);\n        }\n        throw new Error('Не удалось обработать ответ сервера');\n      }).catch((err) => {\n        this.showErrorMessage.showMessage(err.message);\n      });\n  }\n\n  streamingErr() {\n    this.showErrorMessage.showMessage('Ошибка подключения');\n  }\n\n  readServerMessage(e) {\n    const { status, ...user } = JSON.parse(e.data);\n    if (status === 'add') {\n      this.widget.addUserToList(user);\n    } else if (status === 'del') {\n      this.widget.delUserFromList(user);\n    }\n  }\n\n  messagingOpened() {\n    this.messagingStatus = true;\n    this.widget.formSendMessage.addEventListener('submit', this.createMessage);\n  }\n\n  messagingClosed() {\n    this.messagingStatus = false;\n  }\n\n  messagingError() {\n    this.showErrorMessage.showMessage('Ошибка подключения');\n  }\n\n  createMessage(e) {\n    e.preventDefault();\n    if (this.messagingStatus) {\n      const text = this.widget.enterMessage.value;\n      if (text) {\n        const message = {};\n        message.id = this.widget.mineId;\n        message.text = text;\n        message.date = GetDate.getFormatDate();\n\n        this.communicator.sendMessage(message);\n        this.widget.enterMessage.value = '';\n      }\n    } else {\n      this.showErrorMessage.showMessage('Не удалось подключиться к серверу');\n    }\n  }\n\n  readMessage(e) {\n    const data = JSON.parse(e.data);\n\n    this.widget.renderingMessage(data);\n\n    this.scrollToLastMessage();\n  }\n\n  scrollToLastMessage() {\n    const lastMessage = this.widget.getLastMessage();\n    if (lastMessage) {\n      lastMessage.scrollIntoView({\n        block: 'end',\n        behavior: 'smooth',\n      });\n    }\n  }\n}\n","export default class CreationElements {\n  static createElement(tag, classes, attributes) {\n    const element = document.createElement(tag);\n    if (classes) element.classList.add(...classes);\n    if (attributes) {\n      for (let i = 0; i < attributes.length; i += 1) {\n        element.setAttribute(attributes[i].name, attributes[i].value);\n      }\n    }\n\n    return element;\n  }\n}\n","export default class Curtain {\n  constructor(element) {\n    this.element = element;\n  }\n\n  showCurtain(zIndex, color) {\n    if (zIndex) this.element.style.zIndex = zIndex;\n    if (color) this.element.style.backgroundColor = color;\n\n    this.element.classList.remove('hidden');\n  }\n\n  hideCurtain() {\n    if (this.element.style) this.element.removeAttribute('style');\n    this.element.classList.add('hidden');\n  }\n}\n","export default class GetDate {\n  static getFormatDate() {\n    const date = new Date();\n\n    const dd = GetDate.getDay(date);\n    const mm = GetDate.getMonth(date);\n    const yy = GetDate.getYear(date);\n    const fullDate = `${dd}.${mm}.${yy}`;\n\n    const time = date.toTimeString().slice(0, 5);\n\n    const result = `${time} ${fullDate}`;\n\n    return result;\n  }\n\n  static getDay(date) {\n    let dd = date.getDate();\n    if (dd.length === 1) dd = `0${dd}`;\n    return dd;\n  }\n\n  static getMonth(date) {\n    let mm = date.getMonth() + 1;\n    if (mm.length === 1) mm = `0${mm}`;\n    return mm;\n  }\n\n  static getYear(date) {\n    const result = `${date.getUTCFullYear()}`;\n\n    return result;\n  }\n}\n","export default class ShowErrorMessage {\n  constructor(container, classNameBox, classNameMessage, classNameBtn, classNameHide, curtain) {\n    this.container = container;\n    this.classNameBox = classNameBox;\n    this.classNameMessage = classNameMessage;\n    this.classNameHide = classNameHide;\n    this.classNameBtn = classNameBtn;\n\n    this.curtain = curtain;\n\n    this.errorMessageBox = this.container.querySelector(`.${this.classNameBox}`);\n    this.errorMessage = this.errorMessageBox.querySelector(`.${this.classNameMessage}`);\n    this.errorBtnOK = this.errorMessageBox.querySelector(`.${classNameBtn}`);\n\n    this.hideMessage = this.hideMessage.bind(this);\n  }\n\n  showMessage(message) {\n    if (message) this.errorMessage.textContent = message;\n\n    this.curtain.showCurtain('9999', 'red');\n    this.errorMessageBox.classList.remove(this.classNameHide);\n\n    this.errorMessageBox.style.left = `${this.container.offsetWidth / 2 - this.errorMessageBox.offsetWidth / 2}px`;\n    this.errorMessageBox.style.top = `${this.container.offsetHeight / 2 - this.errorMessageBox.offsetHeight / 2}px`;\n\n    this.errorBtnOK.addEventListener('click', this.hideMessage);\n  }\n\n  hideMessage() {\n    this.errorMessage.textContent = '';\n\n    this.curtain.hideCurtain();\n    this.errorMessageBox.classList.add(this.classNameHide);\n\n    this.errorBtnOK.removeEventListener('click', this.hideMessage);\n  }\n}\n","export default class ToolTip {\n  constructor(classNameTooltip) {\n    this.classNameTooltip = classNameTooltip;\n\n    this.toolTipsBox = [];\n  }\n\n  showToolTip(element, message) {\n    const toolTip = document.createElement('div');\n    toolTip.classList.add(this.classNameTooltip);\n    toolTip.textContent = message;\n    toolTip.dataset.name = element.name;\n    this.toolTipsBox.push(toolTip);\n\n    document.body.append(toolTip);\n\n    const { top, left } = element.getBoundingClientRect();\n    const offsetHorizont = (toolTip.offsetWidth - element.offsetWidth) / 2;\n\n    toolTip.style.left = `${left - offsetHorizont}px`;\n    toolTip.style.top = `${top - toolTip.offsetHeight - 10}px`;\n  }\n\n  hideAllToolTips() {\n    for (let i = 0; i < this.toolTipsBox.length; i += 1) {\n      this.toolTipsBox[i].remove();\n    }\n    this.toolTipsBox = [];\n  }\n\n  hideToolTip(name) {\n    const hideToolTip = this.toolTipsBox.find((t) => t.dataset.name === name);\n    hideToolTip.remove();\n    this.toolTipsBox = this.toolTipsBox.filter((t) => t !== hideToolTip);\n  }\n\n  isToolTip() {\n    if (this.toolTipsBox.length !== 0) return true;\n    return false;\n  }\n}\n","import ChatWidget from './ChatWidget';\nimport CommunicationServer from './CommunicationServer';\nimport ControlChat from './ControlChat';\nimport ToolTip from './ToolTip';\nimport ShowErrorMessage from './ShowErrorMessage';\nimport Curtain from './Curtain';\n\nconst container = document.querySelector('.container');\nconst curtainEl = document.querySelector('.curtain');\n\nconst port = 'https://ahj-task-8-chat.onrender.com';\nconst portWs = 'wss://ahj-task-8-chat.onrender.com';\n\nconst widget = new ChatWidget(container);\nconst toolTip = new ToolTip('tooltip');\nconst communicator = new CommunicationServer(port, portWs);\nconst curtain = new Curtain(curtainEl);\nconst showErrorMessage = new ShowErrorMessage(container, 'error-message_box', 'error-message_text', 'error-message_ok', 'hidden', curtain);\n\nconst controler = new ControlChat(widget, toolTip, communicator, showErrorMessage);\n\ncontroler.activation();\n","// Module\nvar code = \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"ie=edge\\\">\\n    <title>Чат</title>\\n</head>\\n<body>\\n    <div class=\\\"container\\\">\\n        <form class=\\\"registration_form\\\" name=\\\"registration\\\">\\n            <h4 class=\\\"registration_title\\\">Выберите псевдоним</h3>\\n            <input type=\\\"text\\\" class=\\\"enter_nickname\\\" name=\\\"nickname\\\" placeholder=\\\"Minimum 3 characters\\\">\\n            <button type=\\\"submit\\\" class=\\\"send_nickname\\\">Продолжить</button>\\n        </form>\\n        <div class=\\\"chat_box hidden\\\">\\n            <div class=\\\"users_box\\\">\\n                <ul class=\\\"users_list\\\"></div>\\n            <div class=\\\"messages_box\\\">\\n                <ul class=\\\"messages_list\\\"></ul>\\n                <form class=\\\"send-message\\\" name=\\\"message\\\">\\n                    <input type=\\\"text\\\" class=\\\"enter_message\\\" name=\\\"enter\\\" placeholder=\\\"Type your message here\\\">\\n                </form>\\n            </div>\\n        </div>\\n        <div class=\\\"error-message_box hidden\\\">\\n            <h3 class=\\\"error-message_title\\\">Произошла ошибка</h3>\\n            <span class=\\\"error-message_text\\\"></span>\\n            <button type=\\\"button\\\" class=\\\"error-message_ok\\\">Ok</button>\\n        </div>\\n        <div class=\\\"curtain hidden\\\"></div>\\n    </div>\\n</body>\\n</html>\\n\";\n// Exports\nexport default code;","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","import './js/app';\nimport './index.html';\nimport './css/style.css';\nimport './licenses.txt';\n"],"names":["CreationElements","ChatWidget","constructor","container","formRegistration","document","forms","registration","enterNickname","elements","nickname","errorBtnOK","querySelector","userList","chatBox","messageList","formSendMessage","message","enterMessage","enter","mineId","hidingFormRegistration","classList","add","showChatBox","remove","renderingUserList","array","forEach","el","addUserToList","createUserElement","obj","user","createElement","dataset","id","circle","textContent","append","delUserFromList","childNodes","find","child","renderingMessage","chat","m","addMessageToList","messageObj","createMessageElement","messageInf","info","author","date","text","getLastMessage","length","CommunicationServer","port","portWs","ws","sendNickname","url","response","fetch","method","body","streaming","callbackErr","callbackMessage","eventSource","EventSource","addEventListener","getUserList","messaging","callbackOpen","callbackClose","callbackError","WebSocket","sendMessage","send","JSON","stringify","GetDate","ControlChat","widget","toolTip","communicator","showErrorMessage","messagingStatus","regNickname","bind","changeEnterNickname","hideError","streamingErr","readServerMessage","messagingOpened","messagingClosed","messagingError","createMessage","readMessage","activation","e","preventDefault","value","FormData","then","ok","json","Error","data","status","showChat","showToolTip","catch","err","showMessage","isToolTip","hideToolTip","target","name","hideMessage","parse","getFormatDate","scrollToLastMessage","lastMessage","scrollIntoView","block","behavior","tag","classes","attributes","element","i","setAttribute","Curtain","showCurtain","zIndex","color","style","backgroundColor","hideCurtain","removeAttribute","Date","dd","getDay","mm","getMonth","yy","getYear","fullDate","time","toTimeString","slice","result","getDate","getUTCFullYear","ShowErrorMessage","classNameBox","classNameMessage","classNameBtn","classNameHide","curtain","errorMessageBox","errorMessage","left","offsetWidth","top","offsetHeight","removeEventListener","ToolTip","classNameTooltip","toolTipsBox","push","getBoundingClientRect","offsetHorizont","hideAllToolTips","t","filter","curtainEl","controler"],"sourceRoot":""}